<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Costless Incremental</title>
</head>
<body style="background-color: black;font-family: monospace;">

<h3 id="hint" style="color:rgb(255, 127, 0)"></h3>

<h1 id="counter" style="color:orange;"></h1>
<button id="btn" style="width: 100px;height: 20px;color:orange;">Click</button>

<button id="b2" style="color: red;">HARD RESET</button>

<h3 id="energy" style="color:blue;"></h3>
<button id="upg" style="color:blue;"></button>
<h3 id="texta" style="color:blue;"></h3>   <!--ik how to do css but i want to cram it all in 1 file-->

<button id="finity-points" style="display: none;color:purple;"></button>
<h3 id="finity" style="color:purple;"></h3>
<div style="display:flex;gap:5px;align-items:flex-start">
  <button id="fc1"style="color: purple;display: none;height: 150px;width: 225px;"></button>
  <button id="fc2"style="color: purple;display: none;height: 150px;width: 225px;"></button>
  <button id="fc3"style="color: purple;display: none;height: 150px;width: 225px;"></button>
</div>
<h6></h6>
<div style="display:flex;gap:5px;align-items:flex-start">
  <button id="finityupg1"style="color: purple;display: none;height: 75px;width: 225px;"></button>
  <button id="finityupg2"style="color: purple;display: none;height: 75px;width: 225px;"></button>
  <button id="finityupg3"style="color: purple;display: none;height: 75px;width: 225px;"></button>
</div>
<h6></h6>

<button id="infinity" style="color:darkgoldenrod"></button>
<h3 id="infinitytext" style="color:darkgoldenrod"></h3>

<div style="display:flex;gap:5px;align-items:flex-start">
<button id="ic1"style="color: darkgoldenrod;display: none;height: 150px;width: 225px;"></button>
<button id="ic2"style="color: darkgoldenrod;display: none;height: 150px;width: 225px;"></button>
<button id="ic3"style="color: darkgoldenrod;display: none;height: 150px;width: 225px;"></button>
</div>

<h3 id="replicantion" style="color: aqua;"></h3>
<div style="display:flex;gap:5px;align-items:flex-start">
<button id="ru1" style="color:aqua;display: none;height: 75px;width: 225px;"></button>
<button id="ru2" style="color:aqua;display: none;height: 75px;width: 225px;"></button>
<button id="ru3" style="color:aqua;display: none;height: 75px;width: 225px;"></button>
</div>

<h6></h6>

<button id="eternity" style="color:indigo"></button>
<h3 id="eternitytext" style="color:indigo"></h3>
<h3 id="eternities" style="color:indigo"></h3>

       <h1 id="0"></h1>
       <h1 id="1"></h1>
       <h1 id="2"></h1>
       <h1 id="3"></h1>
       <h1 id="4"></h1>
       <h1 id="5"></h1>
       <h1 id="6"></h1>
       <h1 id="7"></h1>
       <button id="generate_new_rune"></button>
<script class="module">
  class Decimale{
    fromDecimale(value) {
    if (value <= -1) return 0;
    const layer = Math.min(2,Math.floor(value));
    const frac = value - layer;
    // Base interpolation: 1 -> 10
    const base = 1 + 9 * frac;
    // Layer -1: log10
    if (layer === -1) {
      return Math.log10(base);
    }
    // Layer 0: Normal numbers
    if (layer === 0) {
      return base;
    }
    // Layer 1: 10^x
    if (layer === 1) {
      return Math.pow(10, base);
    }
    // Layer 2: 10^10^x
    if (layer === 2){
      return Math.pow(10,Math.pow(10,base))
    }
  }
  //-1 is log10(1),0
  //-0.5 is log10(5.5),about 0.7
  //0 is 1
  //0.5 is 1+(9*0.5),5.5
  //1 is 10^1,10
  //1.5 is 10^5.5,about 300000
  //2 is 10b
  //2.5 is 10^10^(1+(9*0.5)),about e300000
  //3 is 1e10b
  toDecimale(n) {
    let d=new Decimale()
    if (n <= 0) return -1;
    let layer = 0;
    let x = n;
    if (!Number.isFinite(x)) return d.toDecimale(Number.MAX_VALUE);
    // Count exponent layers,should stop at around 2.25
    while (x > 10) {
      x = Math.log10(x);
      layer++;
      if (!isFinite(x)) break;
    }
    while (1 > x) {
      x=10**x;
      layer=layer-1;
      if (!isFinite(x)) break;
    }
    // x is now in [1, 10]
    // map 1 -> 0, 10 -> 1
    const frac = (x - 1) / 9;
    return layer + frac;
  }
  tostr(value) {
    if (value <= -1) return 0;
    let layer = Math.floor(value);
    const frac = value - layer;
    let base = (10**(1+9*frac));
    let str=""
    if (layer<2){
      let d=new Decimale()
      let val=d.fromDecimale(value)
      return Math.round(10000*val)/10000
    }
    if (layer>10){
      str="(e^"+String(layer-2)+")"
      layer=2
    }
    while (layer>2){
      layer=layer-1;
      str=str+"e";
    }
    return str+String(Math.round(100*(10**(base-Math.floor(base))))/100)+"e"+String(Math.floor(base))
  }
  add(a, b) {
    const d=new Decimale()
    if (a==-1){return b}
    const na = d.fromDecimale(a);
    const nb = d.fromDecimale(b);
    const sum = na + nb;
    if (!isFinite(sum)) {
      if (Math.abs(na-nb)>0.1){
        return Math.max(a,b);
      }
      const nc=d.fromDecimale(a-1);
      const nd=d.fromDecimale(b-1);
      let s=Math.abs(nc-nd);
      let ne=10**(nc-nd);
      if (s>16 || !isFinite(ne) || ne==0) {
        return Math.max(a,b);
      }
      return d.toDecimale(Math.log10(ne+1)+nd)+1;
    }
    return d.toDecimale(sum);
  }
  log10(a) {
    return Math.max(a-1,-1);
  }
  powof10(a) {
    return a+1;
  }
  multiply(a,b) {
    const d=new Decimale()
    if (a<=-1 || b<=-1){
      return -1   //0
    }
    if (((-1 <= a) && (a < 0)) || ((-1 <= b) && (b < 0))){
      let e=d.fromDecimale(a)*d.fromDecimale(b)
      if (!isFinite(e)){
        let f=d.fromDecimale(a-1)+d.fromDecimale(b-1) //log10
        if (!isFinite(f)){
          return Math.max(a,b) //-1 to 1(0-10) will always smaller(far far smaller) than >3.25(>e1.8e308)
        }
        return d.toDecimale(f+1)
      }
      return d.toDecimale(e) 
    }
    return d.add(a-1,b-1)+1
  }
  floor(a){
    const d = new Decimale();
    let b = d.fromDecimale(a);
    if (!isFinite(b)){
      return a
    }
    return d.toDecimale(Math.floor(b));
  }
  pow(a,b){
    //a^b is 10^log10(a)*b
    const d=new Decimale()
    return d.multiply(a-1,b)+1
  }
  subtract(a,b){
    //basis for division,logarithms and nth root
    const d=new Decimale()
    if (a<b){
      return -1 //0
    }
    if (a==b){
      if (a<2){
        return -1 //0
      }
      if (a<3){
        return d.toDecimale(d.fromDecimale(a-1)-16)
      }
      return a
    }
    const na = d.fromDecimale(a);
    const nb = d.fromDecimale(b);
    if (!isFinite(na) || !isFinite(nb)) {
      if (Math.abs(a-b)>0.1){
        return a;
      }
      const nc=d.fromDecimale(a-1);
      const nd=d.fromDecimale(b-1);
      let s=Math.abs(nc-nd);
      let ne=10**(nc-nd);
      if (s>16 || !isFinite(ne)) {
        return a;
      }
      return d.toDecimale(Math.log10(ne-1)+nd)+1;
    }
    const sum = na-nb;
    return d.toDecimale(sum);
  }
  div(a,b){
    //just like multiplying
    const d=new Decimale()
    if (a<=-1 || b<=-1){
      return -1   //0
    }
    if (((-1 <= a) && (a <= 0)) || ((-1 <= b) && (b <= 0)) || (b>a)){
      let e=d.fromDecimale(a)/d.fromDecimale(b)
      if (!isFinite(e)){
        let f=d.fromDecimale(a-1)-d.fromDecimale(b-1) //log10
        if (!isFinite(f)){
          return a //-1 to 1(0-10) will always smaller(far far smaller) than >3.25(>e1.8e308)
        }
        return d.toDecimale(f)+1
      }
      return d.toDecimale(e) 
    }
    return d.subtract(a-1,b-1)+1
  }
  nthroot(a,b){
    //just like exponents
    //ath root of b is b^(1/a) or 10^(log(b)/a)
    const d=new Decimale()
    if (a==0){return b}
    return d.div(d.log10(b),a)+1
  }
  superpow(a){
    const d=new Decimale()
    return d.fromDecimale(a)
  }
  superlog(a){
    const d=new Decimale()
    return d.toDecimale(a)
  }
  multiplylist(a){
    const d=new Decimale()
    let base=0
    let i=0
    for (let thing in a){
      base=d.multiply(base,a[i])
      i++
    }
    return base
  }
  addlist(a){
    const d=new Decimale()
    let base=-1
    for (let thing in a){
      base=d.add(base,a[thing])
    }
    return base
  }
  }

  let d=new Decimale()

  const counterEl = document.getElementById("counter");
  const button = document.getElementById("btn");
  const button2 = document.getElementById("b2");
  const energic = document.getElementById("energy");
  const texta = document.getElementById("texta");
  const upg = document.getElementById("upg");
  const finity1 = document.getElementById("finity-points");
  const finity2 = document.getElementById("finity")
  const fcone = document.getElementById("fc1")
  const fctwo = document.getElementById("fc2")
  const fcthree = document.getElementById("fc3")
  const finityupg1 = document.getElementById("finityupg1")
  const finityupg2 = document.getElementById("finityupg2")
  const finityupg3 = document.getElementById("finityupg3")
  const hint_text = document.getElementById("hint")
  const infinity = document.getElementById("infinity")
  const infinitytext = document.getElementById("infinitytext")
  const replicantiontext = document.getElementById("replicantion")
  const ic1=document.getElementById("ic1")
  const ic2=document.getElementById("ic2")
  const ic3=document.getElementById("ic3")
  const ru1=document.getElementById("ru1")
  const ru2=document.getElementById("ru2")
  const ru3=document.getElementById("ru3")
  const eternity = document.getElementById("eternity")
  const eternitytext = document.getElementById("eternitytext")
  const eternitiestext = document.getElementById("eternities")
  let effect_1=document.getElementById("0")
  let effect_2=document.getElementById("1")
  let effect_3=document.getElementById("2")
  let effect_4=document.getElementById("3")
  let effect_5=document.getElementById("4")
  let effect_6=document.getElementById("5")
  let effect_7=document.getElementById("6")
  let effect_8=document.getElementById("7")
 //let and const do the same thing and i stole this
  let rr=Math.PI/2
  let gg=0
  let bb=-Math.PI/2

  let r=(Math.sin(rr)+1)*127.5
  let g=(Math.sin(gg)+1)*127.5
  let b=(Math.sin(bb)+1)*127.5
  
  let d_Infinity=1+d.div(d.toDecimale(1024),d.toDecimale(Math.log2(10)))
  let game={
    count:-1,
    energy:-1,
    upgamount:-1,
    finity_points:-1,
    fc1_complete:0,
    fc2_complete:0,
    fc3_complete:0,
    timesclicked:-1,
    current_fc:0,
    fu1_purchases:-1,
    fu2_purchases:-1,
    fu3_purchases:-1,
    time_spent_in_finity_ms:-1,
    infinity_points:-1,
    help_id:0,
    replicantions:0,
    ic1_complete:0,
    ic2_complete:0,
    ru1_purchases:-1,
    ru2_purchases:-1,
    ru3_purchases:-1,
    current_ic:0,
    ic3_complete:0,
    eternity_points:-1,
    eternities:-1,
    base_rarity_list:[[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"]],
    current_effect_list:[],
  }
  game.count = Number(localStorage.getItem("count") || -1);
  game.energy = Number(localStorage.getItem("energy") || -1);
  game.upgamount = Number(localStorage.getItem("upgamount") || -1)
  game.finity_points = Number(localStorage.getItem("finity") || -1)
  game.current_fc = Number(localStorage.getItem("current_fc") || 0)
  game.current_ic = Number(localStorage.getItem("current_ic") || 0)
  game.fc1_complete = Number(localStorage.getItem("fc1_complete") || 0)
  game.fc2_complete = Number(localStorage.getItem("fc2_complete") || 0)
  game.fc3_complete = Number(localStorage.getItem("fc3_complete") || 0)
  game.timesclicked = Number(localStorage.getItem("timesclicked") || -1)
  game.fu1_purchases = Number(localStorage.getItem("finityupg1") || -1)
  game.fu2_purchases = Number(localStorage.getItem("fu2_purchases") || -1)
  game.fu3_purchases = Number(localStorage.getItem("fu3_purchases") || -1)
  game.time_spent_in_finity_ms = Number(localStorage.getItem("time_spent_in_finity_ms") || -1)
  game.infinity_points = Number(localStorage.getItem("IP") || -1)
  game.help_id = Number(localStorage.getItem("help_id") || 0)
  game.replicantions = Number(localStorage.getItem("replicantions") || 0)
  game.ic1_complete = Number(localStorage.getItem("ic1") || 0)
  game.ic2_complete = Number(localStorage.getItem("ic2") || 0)
  game.ic3_complete = Number(localStorage.getItem("ic3") || 0)
  game.ru1_purchases = Number(localStorage.getItem("ru1") || -1)
  game.ru2_purchases = Number(localStorage.getItem("ru2") || -1)
  game.ru3_purchases = Number(localStorage.getItem("ru3") || -1)
  game.eternity_points = Number(localStorage.getItem("EP") || -1)
  game.eternities = Number(localStorage.getItem("eternities") || -1)
  game.base_rarity_list= JSON.parse(localStorage.getItem("r")) || [[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"]];
  game.current_effect_list= JSON.parse(localStorage.getItem("c")) || [];
  
  let help_text=[
"Self explanatory. Click the button and get upgrades.",
"Keep grinding FP. Finity Challenge 1 will unlock at 10 FP.",
"After completing FC1,keep grinding FP. FC2 unlocks at 100 FP,and its boost is very strong.",
"Now,complete FC2. It should give a massive boost to production,then get 1000 FP and wait. At e160 points,purchase Finity Upgrade 1.",
"Now,grind FP and purchase the upgrades. At 1e9 FP,you will unlock FC3.",
"Now,complete FC3,go for 1e10 FP and grind points. At e330 points,purchase Finity Upgrade 2.",
"Grind to e15 FP and wait for e600 points. Then,buy the upgrade.",
"Buy upgrades. At some point,you will inflate,but that wont be for long. Then,go for e291 FP and buy a final Finity Upgrade 1. Then,you should be able to reach 1.8e308 FP.",
"Grind IP and Replicantions. IC1 will unlock at 50 IP.",
"Grind IP and Replicantions. IC2 unlock is 2000 IP.",
"Grind IP and Replicantions. IC3 unlock is 1e6 IP.",
"Grind IP and Replicantions. At 1.8e308 IP,you will unlock Eternity.",
"Now,you have reached the endgame. Do more Eternities for better Runes.",
  ]
  let help_reqs=[
(!(game.finity_points==-1)),
(!(game.finity_points<1)),
(!(game.finity_points<d.toDecimale(100))),
(!(game.fu1_purchases==-1)),
(!(game.finity_points<d.toDecimale(1e9))),
(!(game.fu2_purchases==-1)),
(!(game.fu3_purchases==-1)),
(!(game.infinity_points==-1)),
(!(game.infinity_points<d.toDecimale(50))),
(!(game.infinity_points<d.toDecimale(2000))),
(!(game.infinity_points<d.toDecimale(1e6))),
(!(game.eternity_points==-1)),
false,
  ]
  let point_boost=0
  let energy_boost=0
  let replicantions_boost=0
  let points_pow=0
  let fp_pow=0
  let ip_pow=0
  let clicks_multi=0
  let points_expo_pow=0
  let eterns_boost=d.multiply(d.log10(game.eternities),1)
  let ep_pending=d.subtract(d.div(d.nthroot(1,game.infinity_points-d.log10(d_Infinity-1)),d.toDecimale(5)),0)
  let ru3_nucost=2.35+0.5*d.superpow(game.ru3_purchases)
  let ru3_reward=d.pow(d.toDecimale(1.1),game.ru3_purchases)
  let ru2_nucost=d.powof10(d.multiply(d_Infinity-1,d.powof10(d.div(game.ru2_purchases,d.toDecimale(Math.log2(10))))))
  let ru2_reward=d.multiply(d.toDecimale(133),game.ru2_purchases)
  let ru1_reward=d.add(game.ru1_purchases,0)
  let ic2_reward=d.pow(game.time_spent_in_finity_ms,d.toDecimale(Math.max(0.1,(game.count-2.4))*game.ic2_complete))
  let repspeed=d.pow(d.toDecimale(1.00115591285),d.multiplylist([ic2_reward,ru1_reward,replicantions_boost]))
  let replicantion_reward=d.pow(d.log10(d.add(d.toDecimale(9),game.replicantions)), d.toDecimale(100))
  let ip_reward=d.div(d.nthroot(d.toDecimale(2.3),d.pow(game.infinity_points,d.toDecimale(1000))-1)+1,1)
  let fc1_reward=((d.div(d.nthroot(d.toDecimale(3.75),game.timesclicked),1)+1)*game.fc1_complete)-1
  let fc2_reward=d.add(0,((d.pow(d.log10(game.count),1)+1)*game.fc2_complete)-1)
  let fc3_reward=d.toDecimale((game.fc3_complete*9)+1)
  let fu1_reward=d.pow(d.log10(game.count),d.multiply(game.fu1_purchases,d.toDecimale(1.5)))
  let fu2_reward=d.pow(d.toDecimale(1.1),game.fu2_purchases)
  let fu2_reward_v2=d.pow(d.nthroot(d.toDecimale(2),game.time_spent_in_finity_ms),game.fu2_purchases)
  let fu3_reward=d.multiply(1,game.fu3_purchases)
  let convpow=d.subtract(d.addlist([game.upgamount,fc1_reward,ru2_reward]),d.toDecimale((game.current_fc==1+game.current_fc==3)/2))
  let nextupgcost=d.powof10(d.pow(d.add(game.upgamount,d.toDecimale(1)),d.toDecimale(2)))+0.1
  let finity_multi=d.pow(d.add(game.finity_points,0),d.add(fc3_reward,fu3_reward))
  let fc3_nerf=d.toDecimale(1+((game.current_fc==3)*7/3))
  let fu1_nucost=d.powof10(d.add(d.pow(d.add(0,game.fu1_purchases),d.toDecimale(2)),d.toDecimale(2)))
  let fu2_nucost=d.toDecimale(1e15)+d.superpow(d.div(game.fu2_purchases,d.toDecimale(75)))
  let fu3_nucost=d.multiply(d.toDecimale(1e15),d.superpow(game.fu3_purchases)/10)
  let ru1_nucost=d.add(game.ru1_purchases,0)+1
  let finity_pending=d.pow(d.multiply(d.div(d.nthroot(0.815,Math.max(game.count-0.2,1)),1),fu1_reward),fp_pow) //let me explain the 0.8. it is so that at a reasonable time you can finity for 1 FP.
  let energy_formula=d.pow(d.multiplylist([fc2_reward,fu2_reward_v2,ip_reward,replicantion_reward,energy_boost]),fu2_reward)
  let ip_pending=d.pow(d.subtract(d.div(d.nthroot(1,game.finity_points-d.log10(d_Infinity-1)),d.toDecimale(5)),0),ip_pow)
  //init
  button.addEventListener("click", () => {
    game.energy=d.add(game.energy,energy_formula)
    let count_thing=d.pow(d.pow(d.nthroot(fc3_nerf,d.multiplylist([d.pow(game.energy,convpow),finity_multi,point_boost])),points_pow)-1,points_expo_pow)+1
    if (count_thing==1){game.count=d.add(game.count,0)} //expo pow bullshit
    else {game.count=d.add(game.count,count_thing)}
    game.timesclicked=d.add(game.timesclicked,clicks_multi)
  });
  button2.addEventListener("click", () => {
    for (let i = 1; i <= 5; i++) {if (!confirm(`Hard reset confirmation ${i}/5. Continue?`)) {return}}
    localStorage.clear()
    game={
    count:-1,
    energy:-1,
    upgamount:-1,
    finity_points:-1,
    fc1_complete:0,
    fc2_complete:0,
    fc3_complete:0,
    timesclicked:-1,
    current_fc:0,
    fu1_purchases:-1,
    fu2_purchases:-1,
    fu3_purchases:-1,
    time_spent_in_finity_ms:-1,
    infinity_points:-1,
    help_id:0,
    replicantions:0,
    ic1_complete:0,
    ic2_complete:0,
    ru1_purchases:-1,
    ru2_purchases:-1,
    ru3_purchases:-1,
    current_ic:0,
    ic3_complete:0,
    eternity_points:-1,
    eternities:-1,
    base_rarity_list:[[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"]],
    current_effect_list:[],
  }
  game.help_id=0
  });
  upg.addEventListener("click", () => {
    game.upgamount=d.floor(d.nthroot(d.toDecimale(2),d.log10(Math.max(game.count,1)-0.1)))
  });
  finity1.addEventListener("click",()=> {
    finity1.disabled=true
    game.finity_points=d.add(game.finity_points,finity_pending)
    game.count=-1; //0
    game.energy=-1; //0
    game.upgamount=-1; //0
    game.time_spent_in_finity_ms=-1; //0
    if (!(game.current_ic==1)){
    if (game.current_fc==1){game.fc1_complete=1;game.current_fc=0}
    if (game.current_fc==2){game.fc2_complete=1;game.current_fc=0}
    if (game.current_fc==3){game.fc3_complete=1;game.current_fc=0}
    }
  })
  fcone.addEventListener("click",()=> {
    if (!game.current_fc==1){finity1.click()}
    game.count=-1; //0
    game.energy=-1; //0
    game.upgamount=-1; //0
    game.time_spent_in_finity_ms=-1; //0
    if (game.current_fc==0) {game.current_fc=1;}
    else {game.current_fc=0}
  })
  fctwo.addEventListener("click",()=> {
    if (!game.current_fc==2){finity1.click()}
    game.count=-1; //0
    game.energy=-1; //0
    game.upgamount=-1; //0
    game.time_spent_in_finity_ms=-1; //0
    if (game.current_fc==0) {game.current_fc=2;}
    else {game.current_fc=0}
  })
  fcthree.addEventListener("click",()=> {
    if (!game.current_fc==3){finity1.click()}
    game.count=-1; //0
    game.energy=-1; //0
    game.upgamount=-1; //0
    game.time_spent_in_finity_ms=-1; //0
    if (game.current_fc==0) {game.current_fc=3;}
    else {game.current_fc=0}
  })
  ic1.addEventListener("click",()=> {
    if (!game.current_ic==1){infinity.click()}
    game.count=-1
    game.energy=-1
    game.upgamount=-1
    game.finity_points=game.ic2_complete-1
    game.fc1_complete=0
    game.fc2_complete=0
    game.fc3_complete=0
    game.fu1_purchases=-1
    game.fu2_purchases=-1
    game.fu3_purchases=-1
    game.time_spent_in_finity_ms=-1
    game.replicantions=0
    game.current_fc=0
    if (game.current_ic==0) {game.current_ic=1;}
    else {game.current_ic=0}
  })
  ic2.addEventListener("click",()=> {
    if (!game.current_ic==2){infinity.click()}
    game.count=-1
    game.energy=-1
    game.upgamount=-1
    game.finity_points=game.ic2_complete-1
    game.fc1_complete=game.ic1_complete
    game.fc2_complete=game.ic1_complete
    game.fc3_complete=game.ic1_complete
    game.fu1_purchases=-1
    game.fu2_purchases=-1
    game.fu3_purchases=-1
    game.time_spent_in_finity_ms=-1
    game.replicantions=0
    game.current_fc=0
    if (game.current_ic==0) {game.current_ic=2}
    else {game.current_ic=0}
  })
  ic3.addEventListener("click",()=> {
    if (!game.current_ic==3){infinity.click()}
    game.count=-1
    game.energy=-1
    game.upgamount=-1
    game.finity_points=game.ic2_complete-1
    game.fc1_complete=game.ic1_complete
    game.fc2_complete=game.ic1_complete
    game.fc3_complete=game.ic1_complete
    game.fu1_purchases=-1
    game.fu2_purchases=-1
    game.fu3_purchases=-1
    game.time_spent_in_finity_ms=-1
    game.replicantions=0
    game.current_fc=0
    if (game.current_ic==0) {game.current_ic=3}
    else {game.current_ic=0}
  })
  finityupg1.addEventListener("click",()=> {
  let cc=d.floor(d.nthroot(d.toDecimale(2),d.subtract(d.log10(game.finity_points),d.toDecimale(2))))
  if (cc>=game.fu1_purchases){game.fu1_purchases=cc}
  })
  finityupg2.addEventListener("click",()=> {
  let cca=d.floor(d.add(0,d.multiply(d.superlog(game.finity_points-2),d.toDecimale(75))))
  if ((cca>d.toDecimale(11)) && (game.finity_points<3)){cca=d.toDecimale(11)}
  if (cca>=game.fu2_purchases){game.fu2_purchases=cca}
  })
  finityupg3.addEventListener("click",()=> {
  let ccb=d.floor(d.add(0,d.toDecimale(10*d.div(game.finity_points,d.toDecimale(1e15)))))
  if (ccb>=game.fu3_purchases){game.fu3_purchases=ccb}
  })
  ru1.addEventListener("click",()=> {
  let ccc=d.floor(game.replicantions-2)
  if (ccc>=game.ru1_purchases){game.ru1_purchases=ccc}
  })
  ru2.addEventListener("click",()=> {
  let ccd=d.floor(d.add(0,d.multiply(d.toDecimale(Math.log2(10)),d.log10(d.div(d.log10(game.replicantions),d_Infinity-1)))))
  if (ccd>=game.ru2_purchases){game.ru2_purchases=ccd}
  })
  ru3.addEventListener("click",()=> {
  let cce=d.floor(d.superlog((game.replicantions-1.85)*2))
  if (cce>=game.ru3_purchases){game.ru3_purchases=cce}
  })
  infinity.addEventListener("click",()=> {
    game.infinity_points=d.add(game.infinity_points,ip_pending)
    if (game.current_ic==1){game.ic1_complete=1;game.current_ic=0}
    if (game.current_ic==2){game.ic2_complete=1;game.current_ic=0}
    if (game.current_ic==3){game.ic3_complete=1;game.current_ic=0}
    game.count=-1
    game.energy=-1
    game.upgamount=-1
    game.finity_points=game.ic2_complete-1
    game.fc1_complete=game.ic1_complete
    game.fc2_complete=game.ic1_complete
    game.fc3_complete=game.ic1_complete
    game.current_fc=0
    game.fu1_purchases=-1
    game.fu2_purchases=-1
    game.fu3_purchases=-1
    game.time_spent_in_finity_ms=-1
    game.replicantions=0
  })
  eternity.addEventListener("click",()=> {
    game.eternity_points=d.add(ep_pending,game.eternity_points)
    game.eternities=d.add(0,game.eternities)
    game.count=-1
    game.energy=-1
    game.upgamount=-1
    game.finity_points=-1
    game.fc1_complete=0
    game.fc2_complete=0
    game.fc3_complete=0
    game.current_fc=0
    game.fu1_purchases=-1
    game.fu2_purchases=-1
    game.fu3_purchases=-1
    game.time_spent_in_finity_ms=-1
    game.infinity_points=-1
    game.replicantions=0
    if (game.eternities>-1){game.ic1_complete=1}else{game.ic1_complete=0}
    if (game.eternities>0){game.ic2_complete=1}else{game.ic2_complete=0}
    if (game.eternities>d.toDecimale(2)){game.ic3_complete=1}else{game.ic3_complete=0}
    game.ru1_purchases=-1
    game.ru2_purchases=-1
    game.ru3_purchases=-1
    game.current_ic=0
    let effect_list=[
        0,1,2,3,4,5,6,7
    ]
    const rarities = [
    { name: "Common", color: "rgb(126,239,109)" },
    { name: "Unusual", color: "rgb(255,230,93)" },
    { name: "Rare", color: "rgb(77,82,227)" },
    { name: "Epic", color: "rgb(134,31,222)" },
    { name: "Legendary", color: "rgb(222,31,31)" },
    { name: "Mythic", color: "rgb(31,219,222)" },
    { name: "Ultra", color: "rgb(255,43,117)" },
    { name: "Super", color: "rgb(43,255,163)" },
    { name: "Omega", color: "rgb(73,72,73)" },
    { name: "Fabled", color: "rgb(255,85,0)" },
    { name: "Divine", color: "rgb(103,84,156)" },
    { name: "Supreme", color: "rgb(178,93,217)" },
    { name: "Omnipotent", color: "rgb(94,0,79)" },
    { name: "Astral", color: "rgb(4,99,7)" },
    { name: "Celestial", color: "rgb(96,142,252)" },
    { name: "Seraphic", color: "rgb(199,126,91)" },
    { name: "Transcendent", color: "rgb(255,255,255)" },
    { name: "Ethereal", color: "rgb(246,197,222)" },
    { name: "Galactic", color: "rgb(127,2,38)" },
    { name: "Eternal", color: "rgb(12,193,81)" },
    { name: "Apotheotic", color: "rgb(173,131,30)" },
    { name: "Voidbound", color: "rgb(75,29,173)" },
    { name: "Exalted", color: "rgb(25,127,141)" },
    { name: "Chaos", color: "rgb(29,15,62)" },
    { name: "Cataclysmic", color: "rgb(148,9,9)" },
    { name: "Nullborne", color: "rgb(67,66,70)" },
    { name: "Eclipsed", color: "rgb(101,132,199)" },
    { name: "Radiant", color: "rgb(74,45,181)" },
    { name: "Forsaken", color: "rgb(140,73,73)" },
    { name: "Chromatic", color: "rgb(166,255,251)" }
    ];
    let current_effect_list=[]
    let actual_k=[0,1,2,3,4,5,6,7]
    let rarity_list=[[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"],[-1,"None","rgb(0,0,0)"]]
    for (ii=0;ii<Math.min(8,d.fromDecimale(game.ru3_purchases)+1);ii++){
      let j=0;for (const effect of effect_list){j=j+(1/Math.pow(3,effect))}
      let rand=Math.random()*j
      let k=-1
      while (rand>0){k++;rand=rand-(1/Math.pow(3,effect_list[k]))}
      current_effect_list.push(actual_k[k])
      effect_list.splice(k,1)
      l=Math.log10(1/Math.random())
      let actual_rarity=d.add(eterns_boost,d.multiply(d.toDecimale(10*l),d.pow(d.toDecimale(1.1),game.ru3_purchases)))
      rarity_list[actual_k[k]]=[actual_rarity,rarities[Math.floor(Math.min(l,29))].name,rarities[Math.floor(Math.min(l,29))].color]
      actual_k.splice(k,1)}
    let base_r=[]
    for (const thing of rarity_list){base_r.push(d.tostr(thing[0])+"% rarity")}
    let base_r_2=[]
    for (const thing of game.base_rarity_list){base_r_2.push(d.tostr(thing[0])+"% rarity")}
    if (confirm("Old rune effects:"+String(base_r_2)+" New ones:"+String(base_r)+" Confirm change?")){game.base_rarity_list=rarity_list;game.current_effect_list=current_effect_list}
  })
  setInterval(() => {
    if (isNaN(game.ic1_complete)){game.ic1_complete=true}
    if (isNaN(game.ic2_complete)){game.ic2_complete=true}
    if (isNaN(game.ic3_complete)){game.ic3_complete=true}
    if (isNaN(game.fc1_complete)){game.fc1_complete=true}
    if (isNaN(game.fc2_complete)){game.fc2_complete=true}
    if (isNaN(game.fc3_complete)){game.fc3_complete=true}

    if (game.current_effect_list.includes(0)){point_boost=2+d.div(d.add(game.base_rarity_list[0][0],1),1)}
    if (game.current_effect_list.includes(1)){energy_boost=1.5+d.div(d.add(game.base_rarity_list[1][0],1),1)}
    if (game.current_effect_list.includes(2)){replicantions_boost=1+d.div(d.add(game.base_rarity_list[2][0],1),1)}
    if (game.current_effect_list.includes(3)){points_pow=d.div(d.add(game.base_rarity_list[3][0],d.toDecimale(200)),d.toDecimale(200))}
    if (game.current_effect_list.includes(4)){fp_pow=d.div(d.add(game.base_rarity_list[4][0],d.toDecimale(200)),d.toDecimale(200))}
    if (game.current_effect_list.includes(5)){ip_pow=d.div(d.add(game.base_rarity_list[5][0],d.toDecimale(200)),d.toDecimale(200))}
    if (game.current_effect_list.includes(6)){clicks_multi=d.add(game.base_rarity_list[6][0],1)}
    if (game.current_effect_list.includes(7)){points_expo_pow=d.div(d.add(game.base_rarity_list[7][0],d.toDecimale(2000)),d.toDecimale(2000))}
    eterns_boost=d.multiply(d.log10(game.eternities),1)
    ep_pending=d.subtract(d.div(d.nthroot(1,game.infinity_points-(d_Infinity+2)),d.toDecimale(5)),0)
    ru3_nucost=2.35+0.5*d.superpow(game.ru3_purchases)
    ru3_reward=d.pow(d.toDecimale(1.1),game.ru3_purchases)
    ru2_nucost=d.powof10(d.multiply(d_Infinity-1,d.powof10(d.div(game.ru2_purchases,d.toDecimale(Math.log2(10))))))
    ru2_reward=d.multiply(d.toDecimale(133),game.ru2_purchases)
    ru1_reward=d.add(game.ru1_purchases,0)
    ic2_reward=d.pow(game.time_spent_in_finity_ms,d.toDecimale(Math.max(0.1,(game.count-2.4))*game.ic2_complete))
    repspeed=d.pow(d.toDecimale(1.00115591285),d.multiplylist([ic2_reward,ru1_reward,replicantions_boost]))
    replicantion_reward=d.pow(d.log10(d.add(d.toDecimale(9),game.replicantions)), d.toDecimale(100))
    ip_reward=d.div(d.nthroot(d.toDecimale(2.3),d.pow(game.infinity_points,d.toDecimale(1000))-1)+1,1)
    fu3_reward=d.multiply(1,game.fu3_purchases)
    fc1_reward=((d.div(d.nthroot(d.toDecimale(3.75),game.timesclicked),1)+1)*game.fc1_complete)-1
    fc2_reward=d.add(0,((d.pow(d.log10(game.count),1)+1)*game.fc2_complete)-1)
    fc3_reward=d.toDecimale((game.fc3_complete*9)+1)
    fc3_nerf=d.toDecimale(1+((game.current_fc==3)*(7/3)))
    convpow=d.multiply(d.subtract(d.addlist([game.upgamount,fc1_reward,ru2_reward]),d.toDecimale(((game.current_fc==1)+(game.current_fc==3))/2)),game.ic3_complete*Math.max(0,fc1_reward))
    nextupgcost=d.powof10(d.pow(d.add(game.upgamount,d.toDecimale(1)),d.toDecimale(2)))+0.1
    finity_multi=d.pow(d.add(game.finity_points,0),d.add(fc3_reward,fu3_reward))
    if (game.current_fc==0){fu1_reward=d.pow(d.log10(game.count),d.multiply(game.fu1_purchases,d.toDecimale(1.5)))}
    else{fu1_reward=0}
    fu2_reward=d.pow(d.toDecimale(1.1),game.fu2_purchases)
    fu1_nucost=d.powof10(d.add(d.pow(d.add(0,game.fu1_purchases),d.toDecimale(2)),d.toDecimale(2))) 
    if (game.fu2_purchases==d.toDecimale(11)){fu2_nucost=3}
    else{fu2_nucost=2+d.superpow(d.div(game.fu2_purchases,d.toDecimale(75)))}
    fu2_reward_v2=d.pow(d.nthroot(d.toDecimale(2),game.time_spent_in_finity_ms),game.fu2_purchases)
    finity_pending=d.pow(d.multiply(d.div(d.nthroot(0.815,Math.max(game.count-0.2,1)),1),fu1_reward),fp_pow) //let me explain the 0.8. it is so that at a reasonable time you can finity for 1 FP.
    energy_formula=d.pow(d.multiplylist([fc2_reward,fu2_reward_v2,ip_reward,replicantion_reward,energy_boost]),fu2_reward)
    fu3_nucost=d.multiply(d.toDecimale(1e15),d.superpow(game.fu3_purchases)/10)
    ru1_nucost=2+d.add(game.ru1_purchases,0)
    ip_pending=d.pow(d.subtract(d.div(d.nthroot(1,game.finity_points-d.log10(d_Infinity-1)),d.toDecimale(5)),0),ip_pow)
    //those were the formulas

    //misc stuff
    if (!(game.help_id>7)){replicantiontext.textContent=""}
    else {replicantiontext.textContent="You have "+d.tostr(game.replicantions)+" Replicantions,replicating at a rate of x"+d.tostr(d.pow(repspeed,d.toDecimale(1800)))+" per minute,giving a x"+d.tostr(replicantion_reward)+" multiplier to energy.";game.replicantions=d.multiply(game.replicantions,repspeed)}

    //prestige layers

    if (d.log10(game.infinity_points)<(d_Infinity-1) && !(game.help_id>11)){eternity.style.display="none";eternity.textContent="";eternitytext.textContent=""}
    else{eternity.textContent = "Eternity for "+d.tostr(ep_pending)+" Eternity points.";eternitytext.textContent = "You have "+d.tostr(game.eternity_points)+" Eternity points,doing absolutely nothing."
    eternitiestext.textContent="You have "+d.tostr(game.eternities)+" eternities,boosting rune strength by +"+d.tostr(eterns_boost)+"%,automatic FP at 1 eternity,and you get an infinity challenge auto-completed for every eternity,up to 3.";eternity.style.display="inline-block"}

    if (d.log10(game.finity_points)<(d_Infinity-1) && !(game.help_id>7)){infinity.style.display="none";infinity.textContent="";infinitytext.textContent=""}
    else{infinity.textContent = "Infinity for "+d.tostr(ip_pending)+" Infinity points.";infinitytext.textContent = "You have "+d.tostr(game.infinity_points)+" Infinity points,boosting energy by "+d.tostr(ip_reward)+"x.";infinity.style.display="inline-block"}
    
    if (game.count<2 && !(game.help_id>0)){finity1.style.display="none";finity1.textContent="";finity2.textContent=""}
    else{finity1.textContent = "Finity for "+d.tostr(finity_pending)+" Finity points."
      if (game.finity_points>-1) {finity2.textContent = "You have "+d.tostr(game.finity_points)+" Finity points,boosting points by "+d.tostr(finity_multi)+"x,also autoclicking the button 30 times per second."}
      else {finity2.textContent = "You have 0 Finity points,boosting points by 1x."};finity1.style.display="inline-block"}
    //finity upgs and replicantion upgs
    if (game.help_id>7){ru3.style.display="inline-block";ru3.textContent="+1 rune effect and rarities are 10% higher. Replicantions needed for next upgrade:"+d.tostr(ru3_nucost)+" Current effect:rarity x"+d.tostr(ru3_reward)+" and +"+d.tostr(game.ru3_purchases)+" rune effects."}
    else{ru3.style.display="none";ru3.textContent=""}

    if (game.help_id>7){ru2.style.display="inline-block";ru2.textContent="Get a replicantion galaxion. Replicantions needed for next RG:"+d.tostr(ru2_nucost)+" Current effect:+"+d.tostr(ru2_reward)+" to energy conv rate."}
    else{ru2.style.display="none";ru2.textContent=""}

    if (game.help_id>7){ru1.style.display="inline-block";ru1.textContent="Boost replicantion speed. Replicantions needed for next upgrade:"+d.tostr(ru1_nucost)+" Current effect:x"+d.tostr(ru1_reward)+"."}
    else{ru1.style.display="none";ru1.textContent=""}

    if (d.log10(game.count)>d.toDecimale(600) || game.help_id>6){finityupg3.style.display="inline-block";finityupg3.textContent="Boost FP effect. FP needed for next upgrade:"+d.tostr(fu3_nucost)+" Current effect:+^"+d.tostr(fu3_reward)}
    else{finityupg3.style.display="none";finityupg3.textContent=""}

    if (d.log10(game.count)>d.toDecimale(160) || game.help_id>3){finityupg1.style.display="inline-block";finityupg1.textContent="Boost FP based on points. FP needed for next upgrade:"+d.tostr(fu1_nucost)+" Current effect:x"+d.tostr(fu1_reward)}
    else{finityupg1.style.display="none";finityupg1.textContent=""}
    
    if (d.log10(game.count)>d.toDecimale(330) || game.help_id>5){finityupg2.style.display="inline-block";finityupg2.textContent="Boost energy. FP needed for next upgrade:"+d.tostr(fu2_nucost)+" Current effect:x"+d.tostr(fu2_reward_v2)+" and ^"+d.tostr(fu2_reward)}
    else{finityupg2.style.display="none";finityupg2.textContent=""}
    
    //disabling
    if (finity_pending>0) {finity1.disabled=false}
    else {finity1.disabled=true}
    if (ip_pending>0) {infinity.disabled=false}
    else {infinity.disabled=true}
    if (ep_pending>0) {eternity.disabled=false}
    else {eternity.disabled=true}
    if ((nextupgcost>game.count) || game.current_fc==2 || game.current_fc==3) {upg.disabled=true}
    else {upg.disabled=false}
    if (fu1_nucost>game.finity_points || game.current_ic==2){finityupg1.disabled=true}
    else{finityupg1.disabled=false}
    if (fu2_nucost>game.finity_points || game.current_ic==3){finityupg2.disabled=true}
    else{finityupg2.disabled=false}
    if (fu3_nucost>game.finity_points){finityupg3.disabled=true}
    else{finityupg3.disabled=false}
    if (ru1_nucost>game.replicantions){ru1.disabled=true}
    else{ru1.disabled=false}
    if (ru2_nucost>game.replicantions){ru2.disabled=true}
    else{ru2.disabled=false}
    if (ru3_nucost>game.replicantions){ru3.disabled=true}
    else{ru3.disabled=false}
    
    //fcs,ics
    if (game.help_id>10) {
      ic3.style.display="inline-block"
      if (game.current_ic==3){ic3.textContent="Infinity Challenge 3:The second finity upgrade is disabled. Click to exit."}
      else if (game.ic3_complete==1){ic3.textContent="Infinity Challenge 3:The second finity upgrade is disabled. Already completed,all finity upgrades are auto-bought and FC1 multiplies the conv ratio too. Click to reenter. Will not give any extra boosts."}
      else {ic3.textContent="Infinity Challenge 3:The second finity upgrade is disabled."}}
    else {ic3.style.display="none";ic3.textContent=""}
    
    if (game.help_id>9) {
      ic2.style.display="inline-block"
      if (game.current_ic==2){ic2.textContent="Infinity Challenge 2:The first finity upgrade is disabled. Click to exit."}
      else if (game.ic2_complete==1){ic2.textContent="Infinity Challenge 2:The first finity upgrade is disabled. Already completed,boosts replicantion speed by "+d.tostr(ic2_reward)+"x,based on time spent in current finity and also on points,and also giving 1 IP on start. Click to reenter. Will not give any extra boosts."}
      else {ic2.textContent="Infinity Challenge 2:The first finity upgrade is disabled."}}
    else {ic2.style.display="none";ic2.textContent=""}
    
    if (game.help_id>8) {
      ic1.style.display="inline-block"
      if (game.current_ic==1){ic1.textContent="Infinity Challenge 1:Finity challenge coompletions are disabled. Click to exit."}
      else if (game.ic1_complete==1){ic1.textContent="Infinity Challenge 1:Finity challenge completions are disabled. Already completed,all FCs are auto-completed on infinity. Click to reenter. Will not give any extra boosts."}
      else {ic1.textContent="Infinity Challenge 1:Finity challenge completions are disabled."}}
    else {ic1.style.display="none";ic1.textContent=""}

    if (game.finity_points>d.toDecimale(1e9) || game.help_id>4) {
      fcthree.style.display="inline-block"
      if (game.current_fc==3){fcthree.textContent="Finity Challenge 3: FC1 AND FC2,and points are raised ^0.3. Click to exit."}
      else if (game.fc3_complete==1){fcthree.textContent="Finity Challenge 3: FC1 AND FC2,and points are raised ^0.3. Already completed,boosts FP energy boost.(^10) Click to reenter. Will not give any extra boosts."}
      else {fcthree.textContent="Finity Challenge 3: FC1 AND FC2,and points are raised ^0.3."}}
    else {fcthree.style.display="none";fcthree.textContent=""}

    if (game.finity_points>d.toDecimale(100) || game.help_id>2) {
      fctwo.style.display="inline-block"
      if (game.current_fc==2){fctwo.textContent="Finity Challenge 2: You can't buy the conv pow upgrade. Click to exit."}
      else if (game.fc2_complete==1){fctwo.textContent="Finity Challenge 2: You can't buy the conv pow upgrade. Already completed,boosts energy gain (x"+d.tostr(fc2_reward)+"),and autobuy the conv pow upgrade. Click to reenter. Will not give any extra boosts."}
      else {fctwo.textContent="Finity Challenge 2: You can't buy the conv pow upgrade."}}
    else {fctwo.style.display="none";fctwo.textContent=""}
    
    if (game.finity_points>d.toDecimale(10) || game.help_id>1) {
      fcone.style.display="inline-block"
      if (game.current_fc==1){fcone.textContent="Finity Challenge 1: Points->energy conversion rate is decreased by 0.5. Click to exit."}
      else if (game.fc1_complete==1){fcone.textContent="Finity Challenge 1: Points->energy conversion rate is decreased by 0.5. Already completed. Boosts points->energy conversion rate (+"+d.tostr(fc1_reward)+"),based on 1st button clicks. Click to reenter. Will not give any extra boosts."}
      else {fcone.textContent="Finity Challenge 1: Points->energy conversion rate is decreased by 0.5."}}
    else {fcone.style.display="none";fcone.textContent=""}
    //some text and localstorage
    counterEl.textContent = "You have "+String(d.tostr(game.count))+" points.";
    energic.textContent = "You have "+String(d.tostr(game.energy))+" energy.";
    texta.textContent = "You have "+String(d.tostr(game.upgamount))+" upgrades,making energy->points conversion ratio ^"+d.tostr(convpow);
    upg.textContent = "Points needed for next upgrade: "+d.tostr(nextupgcost);
    if (game.eternity_points>-1){
      effect_1.textContent="No effect";effect_1.style.color="rgb(0,0,0)"
      effect_2.textContent="No effect";effect_2.style.color="rgb(0,0,0)"
      effect_3.textContent="No effect";effect_3.style.color="rgb(0,0,0)"
      effect_4.textContent="No effect";effect_4.style.color="rgb(0,0,0)"
      effect_5.textContent="No effect";effect_5.style.color="rgb(0,0,0)"
      effect_6.textContent="No effect";effect_6.style.color="rgb(0,0,0)"
      effect_7.textContent="No effect";effect_7.style.color="rgb(0,0,0)"
      effect_8.textContent="No effect";effect_8.style.color="rgb(0,0,0)"
      if (game.current_effect_list.includes(0)){effect_1.textContent=game.base_rarity_list[0][1]+"("+d.tostr(game.base_rarity_list[0][0])+"% rarity) Rune effect of Amplified Points,boosting points by "+d.tostr(point_boost)+"x.";effect_1.style.color=game.base_rarity_list[0][2]}
      if (game.current_effect_list.includes(1)){effect_2.textContent=game.base_rarity_list[1][1]+"("+d.tostr(game.base_rarity_list[1][0])+"% rarity) Rune effect of Amplified Energy,boosting energy by "+d.tostr(energy_boost)+"x.";effect_2.style.color=game.base_rarity_list[1][2]}
      if (game.current_effect_list.includes(2)){effect_3.textContent=game.base_rarity_list[2][1]+"("+d.tostr(game.base_rarity_list[2][0])+"% rarity) Rune effect of Amplified Replication,boosting replicantion speed by "+d.tostr(replicantions_boost)+"x.";effect_3.style.color=game.base_rarity_list[2][2]}
      if (game.current_effect_list.includes(3)){effect_4.textContent=game.base_rarity_list[3][1]+"("+d.tostr(game.base_rarity_list[3][0])+"% rarity) Rune effect of Exponentiated Points,boosting points to ^"+d.tostr(points_pow)+".";effect_4.style.color=game.base_rarity_list[3][2]}
      if (game.current_effect_list.includes(4)){effect_5.textContent=game.base_rarity_list[4][1]+"("+d.tostr(game.base_rarity_list[4][0])+"% rarity) Rune effect of Exponentiated Finity,boosting FP to ^"+d.tostr(fp_pow)+".";effect_5.style.color=game.base_rarity_list[4][2]}
      if (game.current_effect_list.includes(5)){effect_6.textContent=game.base_rarity_list[5][1]+"("+d.tostr(game.base_rarity_list[5][0])+"% rarity) Rune effect of Exponentiated Infinifty,boosting IP to ^"+d.tostr(ip_pow)+"x.";effect_6.style.color=game.base_rarity_list[5][2]}
      if (game.current_effect_list.includes(6)){effect_7.textContent=game.base_rarity_list[6][1]+"("+d.tostr(game.base_rarity_list[6][0])+"% rarity) Rune effect of Amplified Clicks,boosting effective clicks by "+d.tostr(clicks_multi)+"x.";effect_7.style.color=game.base_rarity_list[6][2]}
      if (game.current_effect_list.includes(7)){effect_8.textContent=game.base_rarity_list[7][1]+"("+d.tostr(game.base_rarity_list[7][0])+"% rarity) Rune effect of Super-exponentiated Points,boosting points exponent to ^"+d.tostr(points_expo_pow)+".";effect_8.style.color=game.base_rarity_list[7][2]}
    }
    else{
      effect_1.textContent="";
      effect_2.textContent="";
      effect_3.textContent="";
      effect_4.textContent="";
      effect_5.textContent="";
      effect_6.textContent="";
      effect_7.textContent="";
      effect_8.textContent="";
    }
    localStorage.setItem("energy", game.energy);
    localStorage.setItem("count", game.count);
    localStorage.setItem("upgamount", game.upgamount);
    localStorage.setItem("finity",game.finity_points)
    localStorage.setItem("current_fc",game.current_fc)
    localStorage.setItem("current_ic",game.current_ic)
    localStorage.setItem("fc1_complete", game.fc1_complete)
    localStorage.setItem("fc2_complete", game.fc2_complete)
    localStorage.setItem("fc3_complete", game.fc3_complete)
    localStorage.setItem("timesclicked", game.timesclicked)
    localStorage.setItem("finityupg1", game.fu1_purchases)
    localStorage.setItem("fu2_purchases", game.fu2_purchases)
    localStorage.setItem("fu3_purchases", game.fu3_purchases)
    localStorage.setItem("time_spent_in_finity_ms",game.time_spent_in_finity_ms)
    localStorage.setItem("IP",game.infinity_points)
    localStorage.setItem("help_id",game.help_id)
    localStorage.setItem("replicantions",game.replicantions)
    localStorage.setItem("ic1",game.ic1_complete)
    localStorage.setItem("ic2",game.ic2_complete)
    localStorage.setItem("ic3",game.ic3_complete)
    localStorage.setItem("ru1",game.ru1_purchases)
    localStorage.setItem("ru2",game.ru2_purchases)
    localStorage.setItem("ru3",game.ru3_purchases)
    localStorage.setItem("EP",game.eternity_points)
    localStorage.setItem("eternities",game.eternities)
    localStorage.setItem("r", JSON.stringify(game.base_rarity_list));
    localStorage.setItem("c", JSON.stringify(game.current_effect_list));

    //misc stuff
    rr=(rr+0.05)%(Math.PI*2)
    gg=(gg+0.05)%(Math.PI*2)
    bb=(bb+0.05)%(Math.PI*2)
    r=(Math.sin(rr)+1)*127.5
    g=(Math.sin(gg)+1)*127.5
    b=(Math.sin(bb)+1)*127.5
    hint_text.style.color = `rgb(${r}, ${g}, ${b})`
    help_reqs=[
(!(game.finity_points==-1)),
(!(game.finity_points<1)),
(!(game.finity_points<d.toDecimale(100))),
(!(game.fu1_purchases==-1)),
(!(game.finity_points<d.toDecimale(1e9))),
(!(game.fu2_purchases==-1)),
(!(game.fu3_purchases==-1)),
(!(game.infinity_points==-1)),
(!(game.infinity_points<d.toDecimale(50))),
    (!(game.infinity_points<d.toDecimale(2000))),
    (!(game.infinity_points<d.toDecimale(1e6))),
    (!(game.eternity_points==-1)),
    false,
    ]
    if (help_reqs[game.help_id]==true){game.help_id++}
    hint_text.textContent=help_text[game.help_id]
    game.time_spent_in_finity_ms=d.add(game.time_spent_in_finity_ms,d.toDecimale(1000/30))
    if (game.finity_points>-1) {button.click()}
    if (game.fc2_complete) {upg.click()}
    if (game.ic3_complete) {finityupg1.click();finityupg2.click();finityupg3.click()}
    if (game.eternities>-1) {game.finity_points=d.add(game.finity_points,finity_pending)}
    //this entire gameloop generally runs in 1 ms
  }, 1000/30);
</script>
</body>
</html>